{% extends "layout.html" %}
	{% block content %}
	<div class="container">
		<link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />
		<!-- <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script> -->


		<div class="pt-3">
		  <h1>Your alert history</h1>
		  <p>We keep up to 3 weeks' worth of your alert history </p>
		  <hr>
		  <div id="table"></div>
		</div>

		<script type="module">
			// import { html, render } from 'https://unpkg.com/htm/preact/standalone.module.js';
			import { Grid, h } from "https://unpkg.com/gridjs?module";


		  const grid  = new Grid({

				columns: [
					{ id: 'client', name: 'Sent to' },
					{ id: 'slot_start_date_time', name: 'Slot Details' },
					{ id: 'slot_length', name: 'Slot length' },
					{ id: 'status', name: 'Status'},
					{ id: 'updated', name: 'Last Updated'},

					],

			data: [
				{% for alert in alerts %}
				{
					client: '{{ client[alert] }}',
					slot_start_date_time: '{{ details[alert] }}',
					slot_length: '{{ length[alert] }}',
					status: '{{ status[alert] }}',
					updated: '{{ updated[alert] }}',

				},
				{% endfor %}
			],
			search: {
				selector: (cell, rowIndex, cellIndex) => [0, 1, 4].includes(cellIndex) ? cell : null,
			},
			sort: true,
			pagination: true,
			language: {
				noRecordsFound: "You have not sent any notifications yet",
			}

			}).render(document.getElementById('table'));
		</script>
	</div>




{% endblock content %}


